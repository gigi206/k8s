---
# =============================================================================
# MetalLB IPAddressPool & L2Advertisement
# =============================================================================
# Configure le pool d'adresses IP pour les services de type LoadBalancer
# Docs: https://metallb.universe.tf/configuration/
# =============================================================================

apiVersion: metallb.io/v1beta1
kind: IPAddressPool
metadata:
  name: default-pool
  namespace: metallb-system
spec:
  addresses:
    # Pool d'IPs disponibles pour les LoadBalancer (auto-assign)
    # Patched by ApplicationSet from config.yaml: features.loadBalancer.pools.default.range
    # Note: 200 (API) is managed by kube-vip, not MetalLB
    - PLACEHOLDER_DEFAULT_POOL_RANGE

---
apiVersion: metallb.io/v1beta1
kind: IPAddressPool
metadata:
  name: external-dns
  namespace: metallb-system
spec:
  addresses:
    # Pool dédié pour external-dns CoreDNS (valeur écrasée par kustomize patch depuis config.yaml)
    - PLACEHOLDER_EXTERNAL_DNS_IP/32
  autoAssign: false  # Seuls les Services avec loadBalancerIP explicite peuvent utiliser ce pool

