---
environment: dev
appName: alloy

alloy:
  namespace: alloy
  version: "1.5.2"  # Helm chart version - Renovate will update this

  # Controller type: daemonset or deployment
  controller:
    type: daemonset

  # Resources
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

  # Loki endpoint (using direct loki service, not gateway)
  loki:
    url: "http://loki.loki.svc.cluster.local:3100/loki/api/v1/push"

  # Log sources configuration
  logs:
    # Kubernetes pod logs (current behavior)
    pods:
      enabled: true

    # Kubernetes Events (cluster-wide events: pod scheduling, errors, etc.)
    events:
      enabled: true

    # Node journal logs (systemd services via journald)
    journal:
      enabled: true

    # RKE2 node logs (kubelet.log, containerd.log)
    rke2:
      enabled: true

    # Kubernetes API audit logs (requires rke2.cis.enabled)
    audit:
      enabled: true

syncPolicy:
  automated:
    enabled: true
    prune: true
    selfHeal: true
