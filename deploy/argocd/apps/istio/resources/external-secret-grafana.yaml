---
# =============================================================================
# ExternalSecret - Kiali Grafana Username
# =============================================================================
# Syncs Grafana admin username from monitoring namespace to istio-system.
# The secret key MUST be 'value.txt' for kiali-server helm chart compatibility.
# Mounted at /kiali-override-secrets/grafana-username/value.txt
# =============================================================================
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: kiali-grafana-username
  namespace: istio-system
spec:
  refreshInterval: 1h
  secretStoreRef:
    kind: ClusterSecretStore
    name: grafana-secrets
  target:
    name: kiali-grafana-username
    creationPolicy: Owner
  data:
    - secretKey: value.txt
      remoteRef:
        key: grafana-admin-credentials
        property: admin-user
---
# =============================================================================
# ExternalSecret - Kiali Grafana Password
# =============================================================================
# Syncs Grafana admin password from monitoring namespace to istio-system.
# The secret key MUST be 'value.txt' for kiali-server helm chart compatibility.
# Mounted at /kiali-override-secrets/grafana-password/value.txt
# =============================================================================
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: kiali-grafana-password
  namespace: istio-system
spec:
  refreshInterval: 1h
  secretStoreRef:
    kind: ClusterSecretStore
    name: grafana-secrets
  target:
    name: kiali-grafana-password
    creationPolicy: Owner
  data:
    - secretKey: value.txt
      remoteRef:
        key: grafana-admin-credentials
        property: admin-password
