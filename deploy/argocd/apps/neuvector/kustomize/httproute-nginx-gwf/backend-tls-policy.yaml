---
# =============================================================================
# BackendTLSPolicy - NeuVector Manager HTTPS Backend (nginx-gateway-fabric)
# =============================================================================
# Configures nginx-gateway-fabric to use TLS when connecting to the NeuVector
# Manager backend. Required because the manager uses HTTPS on port 8443.
#
# The CA certificate is synced from cert-manager via ExternalSecret.
# The NeuVector Manager certificate is signed by the cluster CA (cert-manager).
# =============================================================================
apiVersion: gateway.networking.k8s.io/v1
kind: BackendTLSPolicy
metadata:
  name: neuvector-manager-tls
  namespace: neuvector
spec:
  targetRefs:
    - group: ""
      kind: Service
      name: neuvector-manager-https
  validation:
    caCertificateRefs:
      - group: ""
        kind: Secret
        name: neuvector-backend-ca
    hostname: neuvector-service-webui.neuvector.svc.cluster.local
