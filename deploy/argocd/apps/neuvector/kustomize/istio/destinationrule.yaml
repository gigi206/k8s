---
# =============================================================================
# DestinationRule - TLS to NeuVector Manager backend
# =============================================================================
# Configures Istio to use TLS when connecting to NeuVector Manager.
# Uses cert-manager issued certificate (validated via root-ca-neuvector secret).
# =============================================================================

apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  name: neuvector-manager-tls
  namespace: neuvector
spec:
  host: neuvector-manager-https.neuvector.svc.cluster.local
  trafficPolicy:
    tls:
      mode: SIMPLE
      sni: neuvector-manager-https.neuvector.svc.cluster.local
      credentialName: root-ca-neuvector
