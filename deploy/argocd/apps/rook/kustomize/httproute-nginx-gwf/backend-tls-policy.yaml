---
# =============================================================================
# BackendTLSPolicy - Ceph Dashboard HTTPS Backend (nginx-gateway-fabric)
# =============================================================================
# Configures nginx-gateway-fabric to use TLS when connecting to the Ceph
# Dashboard backend. Required because the dashboard uses HTTPS on port 8443.
#
# The CA certificate is extracted from the running Ceph dashboard by the
# backend-ca-configmap-job and stored in a ConfigMap.
# =============================================================================
apiVersion: gateway.networking.k8s.io/v1
kind: BackendTLSPolicy
metadata:
  name: ceph-dashboard-tls
  namespace: rook-ceph
spec:
  targetRefs:
    - group: ""
      kind: Service
      name: ceph-dashboard-https
  validation:
    caCertificateRefs:
      - group: ""
        kind: ConfigMap
        name: ceph-dashboard-backend-ca
    hostname: ceph-dashboard
