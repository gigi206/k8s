---
# Configuration OAuth2 Proxy - Dev
environment: dev
appName: oauth2-proxy

oauth2Proxy:
  # Replicas
  replicas: 1

  # OIDC Configuration (Keycloak)
  oidc:
    clientId: "oauth2-proxy"
    # Skip SSL verification for self-signed certs in dev
    skipProviderVerify: true

  # Resources (dev: minimal)
  resources:
    requests:
      cpu: "50m"
      memory: "64Mi"
    limits:
      cpu: "100m"
      memory: "128Mi"

  # Apps to protect via ext_authz
  # Note: Les hosts complets sont construits dans les AuthorizationPolicies
  # via les patches kustomize avec {{ .common.domain }}
  protectedApps:
    - subdomain: "prometheus"
      name: "Prometheus"
    - subdomain: "alertmanager"
      name: "Alertmanager"
    - subdomain: "hubble"
      name: "Hubble UI"
    - subdomain: "longhorn"
      name: "Longhorn UI"

syncPolicy:
  automated:
    enabled: true
    prune: true
    selfHeal: true
