---
# Configuration Velero - Dev
# Single instance, minimal resources, short retention
environment: dev
appName: velero

velero:
  namespace: velero
  version: "11.3.2"  # Helm chart version - Renovate will update this

  # Plugin AWS pour S3 (Rook-Ceph RGW)
  pluginAws:
    version: "v1.13.2"

  # Resources (server)
  resources:
    requests:
      cpu: "50m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

  # Node-agent (data mover for CSI snapshot upload to S3)
  nodeAgent:
    enabled: true
    resources:
      requests:
        cpu: "50m"
        memory: "128Mi"
      limits:
        cpu: "500m"
        memory: "512Mi"

  # S3 storage configuration
  s3:
    secretName: velero-s3-credentials  # Secret created by credentials Job
    obcSecretName: velero-storage      # Secret created by ObjectBucketClaim
    obcConfigMapName: velero-storage   # ConfigMap created by ObjectBucketClaim

  # Backup schedule
  schedule:
    cron: "0 2 * * *"   # Daily at 2am
    ttl: "72h"           # 3 days retention

  # Dashboard (Velero UI - OTWLD)
  dashboard:
    enabled: true
    version: "0.14.0"  # Velero UI Helm chart version - Renovate will update this
    resources:
      requests:
        cpu: "50m"
        memory: "64Mi"
      limits:
        cpu: "200m"
        memory: "256Mi"

  # Backup configuration
  # No server-side defaults: each backup chooses its own options via UI/CLI
  backup: {}

# Grafana dashboard folder
dashboard:
  folder: "Velero"

syncPolicy:
  automated:
    enabled: true
    prune: true
    selfHeal: true
